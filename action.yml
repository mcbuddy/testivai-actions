name: 'TestivAI Visual Regression Approval'
description: 'Approve or reject visual regression changes generated by TestivAI through PR comments'
author: 'TestivAI'

inputs:
  github-token:
    description: 'GitHub token for authentication'
    required: true
    default: ${{ github.token }}
  
  approvals-path:
    description: 'Path to the approvals.json file'
    required: false
    default: '.testivai/visual-regression/report/approvals.json'
  
  report-path:
    description: 'Path to the TestivAI report.json file'
    required: false
    default: '.testivai/visual-regression/report/report.json'
  
  diff-directory:
    description: 'Directory containing visual diff images'
    required: false
    default: '.testivai/visual-regression/report/diff'
  
  commit-message:
    description: 'Custom commit message for approved changes'
    required: false
    default: 'chore: update visual regression baselines [skip ci]'

outputs:
  approved-files:
    description: 'List of approved visual regression files'
  
  rejected-files:
    description: 'List of rejected visual regression files'
  
  result:
    description: 'Result of the approval process (success/failure)'

runs:
  using: 'node16'
  main: 'dist/index.js'

branding:
  icon: 'check-circle'
  color: 'green'
